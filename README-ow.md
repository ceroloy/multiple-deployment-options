## OpenWhisk ile Sunucusuz Servis

OpenWhisk ile servisi sunucusuz olarak ayağa kaldıracağız.


OpenWhisk CLI'nin çalıştığından emin olmak için aşağıdaki komutu çalıştırın.
```
$ bx wsk list
```

Daha sonra kendi bilgisayarınızda, $.../proje_dizini/multiple-deployment-options/**service** dizininde olduğunuzdan emin olun.

``` $ npm install ``` ile bağımlı olunan paketleri indirin.

Fibonacci Servisini cluster'da ayağa kaldırın.

  ``` 
  $ node deploy.js --install
  ```


## Fibonacci Servisi Test Etmek

  OpenWhisk alan adınızı edinin.

  ``` 
  $ bx wsk namespace list
  ```

  ``` 
  $ bx cs workers fibonacci-cluster
  ```

Curl komutunda bu alan adını kullanarak fibonacci servisi çağıracağız.

**1. 1000.ci Fibonacci sayısını bulmak için**
  ```
  $ curl -v https://openwhisk.ng.bluemix.net/api/v1/web/<namespace>/default/fibonacci?iteration=1000

  #Cevap

  {"number":"43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875","length":209,"iterations":"1000","ms":41}

   #Farklı Fibonacci sayılarını bulmak için iteration'a, ..iteration=6 gibi istediğiniz sayıyı verebilirsiniz.
  ```
  
  **2. 5000 milisaniye çalışıp durduğunda son hesapladığı Fibonacci sayısını bulmak için**
  ```
  $ curl -v https://openwhisk.ng.bluemix.net/api/v1/web/<namespace>/default/fibonacci?duration=5000

  #Cevap

  {"number":"85117340958714207422967864849618408784950523533954530926877467162626180860356154297691939527317026023833275748190912068182430548098789690940980775523043348859149005480508968868928024921164038954488940047446146550749070538480557363889919601934579082229004995817752744442307385483302481255544610990314499255210544752552534050592284892837248483898589995214218971473055186653589987842818336336911233480444533946537556536972796271207361305184680677312929824359079216523349564956852618933691109532072097372809932356019485289111312155041633696343501523936301088967417097099665015596973286040885974859736772548074500555812641874052495423808843195901221067530972647256077971681499956012664855292370769853561681018822815407999281111194109491496482934812796227853304284362615123980884007098539328588526268275812480746016627451939173197494369469245851276418455046198801343450763890507682231644716736238014517172100545913740476960950954183416012382370547804649462338993207433094054350765786894006612748632831671017088806992640
  79999227529020543565770595986312892958506236754944777960270254975701817132984321405152839718431251028018728217255739182303727833885533003493406542740717290975130528951824936851523061808771164292500090531544041606006922735479051025610601552520339195931647276357302762686304081537190865640296101695154345472753428928474958999551326471964582465198108456194630037742868341201626262861698810970691249586912454661146614505625887625949541579313601258309495633724883995138378382950156685437533837742918375341","length":1513,"iterations":"7241","ms":5001}

  #Farklı süreleri denemek için duration'ı, ..duration=100 gibi istediğiniz sayıyı verebilirsiniz.
  ```

  **3. Hata oluşmasını sağlamak için**
  ```
  $ curl -v -X POST http://<cluster-public-ip>:30080/fibonacci?crash=true

  #Hata olmaması için crash=false yazmanız yetreli. Kod normal çalışacaktır.

  #Servis çalışmayı sonlandıracaktır.
   HTTP/1.1 400 Bad Request
   X-Backside-Transport: FAIL FAIL
  ...
  ```

  
  Oluşturduğunuz OpenWhisk aksiyonu listeleyin. Daha sonra ismini kullanarak silin. 

  ```
  $ bx wsk action list
  $ bx wsk delete <action_name>
  ```

  **Not**: [Buradan](https://console.bluemix.net/docs/openwhisk/bluemix_cli.html#cloudfunctions_cli) okuyabileceğiniz üzere, syntax "bx wsk .. " şeklindedir.